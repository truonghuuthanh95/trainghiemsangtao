@model TraiNghiemSangTao.Models.DTO.SocialLifeSkillOneViewModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="col-md-10 col-md-offset-1">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h4>Nội dung khác</h4>
        </div><div class="panel-body">
            <p class="text-waring text-warning">Lưu ý! Vui lòng điền thông tin theo thứ tự</p>
            <form>
                @Html.AntiForgeryToken()
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="formBasicText" class="control-label">
                                1.Cấp trường tham gia
                            </label>
                            <select name="schoolDegreeSlected" id="schoolDegreeSlected" class="form-control">
                                @{
                                    foreach (var item in Model.SchoolDegrees)
                                    {
                                        <option value="@item.Id">@item.Name</option>
                                    }
                                }

                            </select>
                        </div>
                    </div><div class="col-md-4">
                        <div class="form-group">
                            <label for="formBasicText" class="control-label">
                                2.Quận
                            </label>
                            <select name="districtSlected" id="districtSlected" class="form-control">
                                @{
                                    foreach (var item in Model.Districts)
                                    {
                                        <option value="@item.Id">@item.Type @item.Name</option>
                                    }
                                }

                            </select>
                        </div>
                    </div>
                </div><div class="row">
                    <div class="col-md-8">
                        <div class="form-group">
                            <label for="formBasicText" class="control-label">
                                3.Trường
                            </label>
                            <select name="schoolNameSelected" id="schoolNameSelected" class="form-control">
                                @{
                                    foreach (var item in Model.Schools)
                                    {
                                        <option value="@item.Id">@item.Name</option>
                                    }
                                }
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label for="formBasicText" class="control-label">
                                4.Khối lớp
                            </label>
                            <select name="gradeSlected" id="gradeSlected" class="form-control">
                                @{
                                    foreach (var item in Model.Classes)
                                    {
                                        <option value="@item.Id">@item.Name</option>
                                    }
                                }
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group has-feedback" id="errorActivityTitle">
                            <label for="formControlsSelect" class="control-label">
                                5.Nội dung thực hiện hoạt động
                            </label>
                            <input type="text" placeholder="Nội dung thực hiện" name="activityTitle" value="" id="activityTitle" class="form-control">
                            <span class="help-block help-block-true" id="errorActivityTitleMessage"></span>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group has-feedback" id="errorDateGo">
                            <label for="exampleInputEmail1" class="control-label">
                                6.Ngày bắt đầu
                            </label>
                            <input type="text" class="form-control datepicker" id="dateGo">
                            <span class="help-block" id="errorDateGoMessage"></span>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group has-feedback" id="errorDateEnd">
                            <label for="exampleInputEmail1" class="control-label">
                                7.Ngày kết thúc
                            </label>
                            <input type="text" class="form-control datepicker" id="dateEnd">
                            <span class="help-block" id="errorDateEndMessage"></span>
                        </div>
                    </div>
                </div>
                
                        
                <div class="row">
                    <div class="col-sm-12">
                        <div class="form-group has-feedback" id="errorfilekehoach">
                            <label for="exampleInputFile" class="control-label">8.File kế hoạch (chỉ chấp nhận file pdf dung lượng nhỏ hơn 2MB)</label>
                            <input type="file" id="filekehoach">
                            <span class="help-block help-block-true" id="errorfilekehoachMessage"></span>
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-md-6 col-sm-6">
                        <div class="form-group has-feedback" id="errorTeacherName">
                            <label for="formBasicText" class="control-label">
                                9.Người phụ trách <i>(Ghi rõ họ và tên)</i>
                            </label>
                            <input type="text" placeholder="Người phụ trách" name="teacherName" value="" id="teacherName" class="form-control">
                            <span class="help-block help-block-true" id="errorTeacherNameMessage"></span>
                        </div>
                    </div><div class="col-md-6 col-sm-6">
                        <div class="form-group">
                            <label for="formBasicText" class="control-label">
                                10.Chức vụ
                            </label><select name="jobTitleSelected" id="jobTitleSelected" class="form-control">
                                @{
                                    foreach (var item in Model.Jobtitles)
                                    {
                                        <option value="@item.Id">@item.Name</option>
                                    }
                                }
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group has-feedback" id="errorEmail">
                            <label for="formBasicText" class="control-label">
                                11.Email
                            </label>
                            <input type="email" placeholder="Email" value="" name="emailEntered" id="emailEntered" class="form-control">
                            <span class="help-block help-block-true" id="errorEmailMessage"></span>
                        </div>
                    </div><div class="col-md-6">
                        <div class="form-group has-feedback" id="errorPhoneNumber">
                            <label for="formBasicText" class="control-label">
                                12.Số điện thoại
                            </label>
                            <input type="number" placeholder="Số điện thoại" name="phoneNumber" value="" id="phoneNumber" class="form-control">
                            <span class="help-block help-block-true" id="errorPhoneNumberMessage"></span>
                        </div>
                    </div>
                </div>
            </form>
        </div><div class="panel-footer"><button type="button" class="btn btn-success btn-block" id="submitCreativeExp" onclick="submitCreativeExp()">Đăng kí</button></div>
    </div>
    <span hidden class="loader" id="loader"></span>

</div>
<script>
    $(document).ready(function () {
        $('.datepicker').datepicker({
            format: 'dd-mm-yyyy',
            autoclose: true,

        })

    })
    $('#schoolDegreeSlected').change(function () {
        $.get('/getSchoolBySchoolDegreeAndDistrict/' + $(this).val() + '/' + $('#districtSlected').val(), function (data, status) {

            var schools = JSON.parse(data);

            $('#schoolNameSelected').children().remove().end();
            for (var i = 0; i < schools.length; i++) {

                $('#schoolNameSelected').append('<option value=' + schools[i].Id + '>' + schools[i].Name + '</option>')
            }
        })
        $.get('/getClassBySchoolDegree/' + $(this).val(), function (data, status) {

            var classes = JSON.parse(data);

            $('#gradeSlected').children().remove().end();
            for (var i = 0; i < classes.length; i++) {

                $('#gradeSlected').append('<option value=' + classes[i].Id + '>' + classes[i].Name + '</option>')
            }
        })
    })
    $('#districtSlected').change(function () {
        $.get('/getSchoolBySchoolDegreeAndDistrict/' + $('#schoolDegreeSlected').val() + '/' + $(this).val(), function (data, status) {

            var schools = JSON.parse(data);

            $('#schoolNameSelected').children().remove().end();
            for (var i = 0; i < schools.length; i++) {

                $('#schoolNameSelected').append('<option value=' + schools[i].Id + '>' + schools[i].Name + '</option>')
            }
        })
    })

    var selected = [];
    $('#subject input:checked').each(function () {
        selected.push($(this).attr('value'));
    });
    function submitCreativeExp() {
        if ($('#dateGo').val() == '') {
            $('#errorDateGo').addClass('has-error');
            $('#errorDateGoMessage').text('Vui lòng nhập ngày tham gia');
            $('#dateGo').focus();
        }
        else {
            $('#errorDateGo').removeClass('has-error');
            $('#errorDateGoMessage').text('');
        }
        if ($('#dateEnd').val() == '') {
            $('#errorDateEnd').addClass('has-error');
            $('#errorDateEndMessage').text('Vui lòng nhập ngày tham gia');
            $('#dateEnd').focus();
        }
        else {
            $('#errorDateGo').removeClass('has-error');
            $('#errorDateGoMessage').text('');
        }


        if ($('#teacherName').val() == '') {
            $('#errorTeacherName').addClass('has-error');
            $('#errorTeacherNameMessage').text('Vui lòng nhập tên người phụ trách');
        }
        else {
            $('#errorTeacherName').removeClass('has-error');
            $('#errorTeacherNameMessage').text('');
        }
        if ($('#emailEntered').val() == '') {
            $('#errorEmail').addClass('has-error');
            $('#errorEmailMessage').text('Vui lòng nhập địa chỉ email');
        }
        else {
            $('#errorEmail').removeClass('has-error');
            $('#errorEmailMessage').text('');
        }
        if ($('#phoneNumber').val() == '') {
            $('#errorPhoneNumber').addClass('has-error');
            $('#errorPhoneNumberMessage').text('Vui lòng nhập địa chỉ email');
        }
        else {
            $('#errorPhoneNumber').removeClass('has-error');
            $('#errorPhoneNumberMessage').text('');
        }

        if ($('#activityTitle').val() == '') {
            $('#errorActivityTitle').addClass('has-error');
            $('#errorActivityTitleMessage').text('Vui lòng nhập');
        }
        else {
            $('#errorActivityTitle').removeClass('has-error');
            $('#errorActivityTitleMessage').text('');
        }                       
        
        if ($('#filekehoach').val() == '') {
            $('#errorfilekehoach').addClass('has-error');
            $('#errorfilekehoachMessage').text('Vui lòng chọn file');
        }
        else {
            var fileExtention = $('#filekehoach').val().split('.').pop();
            var filekehoach = $('#filekehoach')[0];
            if (fileExtention != 'pdf') {
                $('#errorfilekehoach').addClass('has-error');
                $('#errorfilekehoachMessage').text('File sai định dạng bắt buộc phải là file .pdf');
            }
            else if (filekehoach.files[0].size / (1024 * 1024) > 2) {
                $('#errorfilekehoach').addClass('has-error');
                $('#errorfilekehoachMessage').text('Vui lòng chọn file nhỏ hơn 2MB');
            }
            else {
                $('#errorfilekehoach').removeClass('has-error');
                $('#errorfilekehoachMessage').text('');
            }

        }
              
    }
        </script>